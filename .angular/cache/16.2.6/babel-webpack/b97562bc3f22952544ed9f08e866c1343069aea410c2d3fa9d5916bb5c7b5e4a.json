{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class AuthService {\n  constructor(router) {\n    this.router = router;\n    this.users = [{\n      \"username\": \"admin\",\n      \"password\": \"123\",\n      \"roles\": ['ADMIN']\n    }, {\n      \"username\": \"nadhem\",\n      \"password\": \"123\",\n      \"roles\": ['USER']\n    }];\n    this.isloggedIn = false;\n  }\n  logout() {\n    this.isloggedIn = false;\n    this.loggedUser = undefined;\n    this.roles = undefined;\n    localStorage.removeItem('loggedUser');\n    localStorage.setItem('isloggedIn', String(this.isloggedIn));\n    this.router.navigate(['/login']);\n  }\n  SignIn(user) {\n    let validUser = false;\n    this.users.forEach(curUser => {\n      if (user.username == curUser.username && user.password == curUser.password) {\n        validUser = true;\n        this.loggedUser = curUser.username;\n        this.isloggedIn = true;\n        this.roles = curUser.roles;\n        localStorage.setItem('loggedUser', this.loggedUser);\n        localStorage.setItem('isloggedIn', String(this.isloggedIn));\n      }\n    });\n    return validUser;\n  }\n  isAdmin() {\n    if (!this.roles) return false;\n    return this.roles.indexOf('ADMIN') > -1;\n  }\n  setLoggedUserFromLocalStorage(login) {\n    this.loggedUser = login;\n    this.isloggedIn = true;\n    this.getUserRoles(login);\n  }\n  getUserRoles(username) {\n    this.users.forEach(curUser => {\n      if (curUser.username == username) {\n        this.roles = curUser.roles;\n      }\n    });\n  }\n  static #_ = this.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["AuthService","constructor","router","users","isloggedIn","logout","loggedUser","undefined","roles","localStorage","removeItem","setItem","String","navigate","SignIn","user","validUser","forEach","curUser","username","password","isAdmin","indexOf","setLoggedUserFromLocalStorage","login","getUserRoles","_","i0","ɵɵinject","i1","Router","_2","factory","ɵfac","providedIn"],"sources":["D:\\2éme annéé\\s1\\angular\\cosmetique\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { User } from '../model/User.model';\nimport { Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n  \nusers: User[] = [{\"username\":\"admin\",\"password\":\"123\",\"roles\":['ADMIN']},\n                    {\"username\":\"nadhem\",\"password\":\"123\",\"roles\":['USER']} ];\n\npublic loggedUser!:string;                    \npublic isloggedIn: Boolean = false;\npublic roles!:string[];\n\nconstructor(private router: Router) { }\n\nlogout(){\n  this.isloggedIn = false;\n  this.loggedUser = undefined!;\n  this.roles = undefined!;\n  localStorage.removeItem('loggedUser');\n  localStorage.setItem('isloggedIn',String(this.isloggedIn));\n  this.router.navigate(['/login']);\n}\n  SignIn(user: User): Boolean {\n    let validUser: Boolean = false;\n    this.users.forEach((curUser) => {\n      if (user.username == curUser.username && user.password == curUser.password) {\n        validUser = true;\n        this.loggedUser = curUser.username;\n        this.isloggedIn = true;\n        this.roles = curUser.roles;\n        localStorage.setItem('loggedUser', this.loggedUser);\n        localStorage.setItem('isloggedIn', String(this.isloggedIn));\n      }\n    });\n  return validUser;\n}\nisAdmin():Boolean{\n    if (!this.roles) \n      return false;\n  return (this.roles.indexOf('ADMIN') >-1);\n}\n  setLoggedUserFromLocalStorage(login: string) {\n    this.loggedUser = login;\n    this.isloggedIn = true;\n    this.getUserRoles(login);\n  }\n  getUserRoles(username: string) {\n    this.users.forEach((curUser) => {\n      if (curUser.username == username) {\n        this.roles = curUser.roles;\n      }\n    });\n}\n}\n"],"mappings":";;AAOA,OAAM,MAAOA,WAAW;EAUxBC,YAAoBC,MAAc;IAAd,KAAAA,MAAM,GAANA,MAAM;IAP1B,KAAAC,KAAK,GAAW,CAAC;MAAC,UAAU,EAAC,OAAO;MAAC,UAAU,EAAC,KAAK;MAAC,OAAO,EAAC,CAAC,OAAO;IAAC,CAAC,EACpD;MAAC,UAAU,EAAC,QAAQ;MAAC,UAAU,EAAC,KAAK;MAAC,OAAO,EAAC,CAAC,MAAM;IAAC,CAAC,CAAE;IAGtE,KAAAC,UAAU,GAAY,KAAK;EAGI;EAEtCC,MAAMA,CAAA;IACJ,IAAI,CAACD,UAAU,GAAG,KAAK;IACvB,IAAI,CAACE,UAAU,GAAGC,SAAU;IAC5B,IAAI,CAACC,KAAK,GAAGD,SAAU;IACvBE,YAAY,CAACC,UAAU,CAAC,YAAY,CAAC;IACrCD,YAAY,CAACE,OAAO,CAAC,YAAY,EAACC,MAAM,CAAC,IAAI,CAACR,UAAU,CAAC,CAAC;IAC1D,IAAI,CAACF,MAAM,CAACW,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EACEC,MAAMA,CAACC,IAAU;IACf,IAAIC,SAAS,GAAY,KAAK;IAC9B,IAAI,CAACb,KAAK,CAACc,OAAO,CAAEC,OAAO,IAAI;MAC7B,IAAIH,IAAI,CAACI,QAAQ,IAAID,OAAO,CAACC,QAAQ,IAAIJ,IAAI,CAACK,QAAQ,IAAIF,OAAO,CAACE,QAAQ,EAAE;QAC1EJ,SAAS,GAAG,IAAI;QAChB,IAAI,CAACV,UAAU,GAAGY,OAAO,CAACC,QAAQ;QAClC,IAAI,CAACf,UAAU,GAAG,IAAI;QACtB,IAAI,CAACI,KAAK,GAAGU,OAAO,CAACV,KAAK;QAC1BC,YAAY,CAACE,OAAO,CAAC,YAAY,EAAE,IAAI,CAACL,UAAU,CAAC;QACnDG,YAAY,CAACE,OAAO,CAAC,YAAY,EAAEC,MAAM,CAAC,IAAI,CAACR,UAAU,CAAC,CAAC;;IAE/D,CAAC,CAAC;IACJ,OAAOY,SAAS;EAClB;EACAK,OAAOA,CAAA;IACH,IAAI,CAAC,IAAI,CAACb,KAAK,EACb,OAAO,KAAK;IAChB,OAAQ,IAAI,CAACA,KAAK,CAACc,OAAO,CAAC,OAAO,CAAC,GAAE,CAAC,CAAC;EACzC;EACEC,6BAA6BA,CAACC,KAAa;IACzC,IAAI,CAAClB,UAAU,GAAGkB,KAAK;IACvB,IAAI,CAACpB,UAAU,GAAG,IAAI;IACtB,IAAI,CAACqB,YAAY,CAACD,KAAK,CAAC;EAC1B;EACAC,YAAYA,CAACN,QAAgB;IAC3B,IAAI,CAAChB,KAAK,CAACc,OAAO,CAAEC,OAAO,IAAI;MAC7B,IAAIA,OAAO,CAACC,QAAQ,IAAIA,QAAQ,EAAE;QAChC,IAAI,CAACX,KAAK,GAAGU,OAAO,CAACV,KAAK;;IAE9B,CAAC,CAAC;EACN;EAAC,QAAAkB,CAAA,G;qBAlDY1B,WAAW,EAAA2B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAX/B,WAAW;IAAAgC,OAAA,EAAXhC,WAAW,CAAAiC,IAAA;IAAAC,UAAA,EAFV;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}